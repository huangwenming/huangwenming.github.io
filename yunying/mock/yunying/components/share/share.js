define("components/share/share",function(e,t,n){var i=function(e,t){this.init(e,t)};i.prototype.init=function(e,t){this.callbacks=t,this.data=e,this.getEnv(),this.loadSource(e,t),this.render(t)},i.prototype.getEnv=function(){return navigator.userAgent&&/micromessenger/gi.test(navigator.userAgent.toLowerCase())?void(this.env="weixin"):navigator.userAgent&&/baidumap_ANDR|baidumap_IPHO/gi.test(navigator.userAgent.toLowerCase())?void(this.env="map"):void(this.env="browser")},i.prototype.loadSource=function(e,t){var n=this,i=document.createElement("script");("map"===this.env||"weixin"===this.env)&&(i.src="http://s1.map.bdimg.com/yyfm/nativeAppAdapter/2.0.0/js/nativeAppAdapter.min.js"),"browser"===this.env&&(i.src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5)),document.body.appendChild(i),i.onload=i.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||n.configData(e,t)}},i.prototype.render=function(e){var t=this.shareIcon=document.createElement("div");t.className="share",document.body.appendChild(t),"weixin"===this.env&&this.setWeixinDom(this.data.weixinTipImgUrl),"browser"===this.env&&this.setBrowserDom();var n=this;t.addEventListener("touchstart",function(){e&&e.shareIconClickCb&&e.shareIconClickCb(),"weixin"===n.env&&(n.showWeixinDom(),e&&e.weixinIconClickCb&&e.weixinIconClickCb()),"map"===n.env?(window.nativeAppAdapter.openShare(),e&&e.mapIconClickCb&&e.mapIconClickCb()):n.showBrowserDom()})},i.prototype.showShare=function(){var e=this,t=e.callbacks;t&&t.shareIconClickCb&&t.shareIconClickCb(),"weixin"===e.env&&(e.showWeixinDom(),t&&t.weixinIconClickCb&&t.weixinIconClickCb()),"map"===e.env&&(window.nativeAppAdapter.openShare(),t&&t.mapIconClickCb&&t.mapIconClickCb()),"browser"===e.env&&e.showBrowserDom()},i.prototype.configData=function(e,t){{var n=e.weibo,i=e.weixin,o=e.weixin,r=t.weiboConfirmCb,a=t.weixinConfirmCb,s=t.weixinFriendConfirmCb,c=t.weiboCancelCb,d=t.weixinCancelCb,l=t.weixinFriendCancelCb;e.weixinTipImgUrl}if("map"===this.env||"weixin"===this.env){var p=[{src:"weibo",text:n.desc||"",url:n.url+"?fr=weibo",pic:n.imgUrl,confirm:r||function(){},cancel:c||function(){}},{src:"weixin",title:i.title,text:i.desc||"",url:i.url+"?fr=weixin",contentType:"text",pic:i.imgUrl,confirm:a||function(){},cancel:d||function(){}},{src:"friend",text:o.title,url:o.url+"?fr=weixin_friend",contentType:"text",pic:o.imgUrl,confirm:s||function(){},cancel:l||function(){}}];window.nativeAppAdapter.initShare(p)}else window._bd_share_config={common:{bdText:n.title,bdDesc:n.desc,bdUrl:n.url+"?fr=weibo",bdPic:n.imgUrl},share:[{bdSize:50}]}},i.prototype.setWeixinDom=function(e){function t(){n.style.display="none",i.style.display="none"}var n=document.createElement("div");n.className="weixinzhezhao",n.style.display="none",document.body.appendChild(n);var i=document.createElement("div");i.className="weixintishi",i.innerHTML="<img src="+e+">",i.style.display="none",document.body.appendChild(i),n.addEventListener("touchstart",function(){t()}),i.addEventListener("touchstart",function(){t()})},i.prototype.showWeixinDom=function(){var e=document.querySelector(".weixinzhezhao"),t=document.querySelector(".weixintishi");e.style.display="block",t.style.display="block"},i.prototype.setBrowserDom=function(){var e=document.createElement("div");e.setAttribute("id","share-form"),e.setAttribute("class","share_form"),e.innerHTML='<div class="bdsharebuttonbox" data-tag="share_1"><span>分享到</span><a class="bds_tsina" data-cmd="tsina"></a><a class="bds_weixin" data-cmd="weixin"></a></div>',document.body.appendChild(e);var e=document.querySelector("#share-form"),t=document.querySelector(".bdsharebuttonbox"),n=function(t){t.preventDefault(),e.style.display="none";var n=document.querySelector(".bd_weixin_popup");n&&(n.style.display="none")},i=function(e){e.stopPropagation()};t.addEventListener("touchend",i,!1),e.addEventListener("touchend",n,!1)},i.prototype.showBrowserDom=function(){var e=document.querySelector("#share-form"),t=document.querySelector(".bdsharebuttonbox");e.style.display="block",t.style.left=(window.innerWidth-t.clientWidth)/2+"px"},i.prototype._jsonp=function(e,t,n,i){var o="jsonpcb"+(new Date).getTime();i=i||"cb",e=e+(e.indexOf("?")>-1?"&":"?")+i+"=window."+o,t.ctime=(new Date).getTime();for(var r in t)e+="object"==typeof t[r]?"&"+r+"="+JSON.stringify(t[r]):"&"+r+"="+t[r];var a=document.createElement("script");window[o]=function(e){a.parentNode.removeChild(a),delete window[o],n&&n(null,e)},a.onerror=function(){a.parentNode.removeChild(a),delete window[o],n&&n("error")},a.src=e,a.type="text/javascript",document.body.appendChild(a)},n.exports=i});